<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>Testseite</title>
    <script type="text/javascript">
      //<![CDATA[

      function findPosX(obj) {
        var curleft = 0;
        if (obj.offsetParent) {
          while(1) {
            curleft += obj.offsetLeft;
            if(!obj.offsetParent) {
              break;
            }
            obj = obj.offsetParent;
          }
        } else if(obj.x) {
          curleft += obj.x;
          return curleft;
        }
      }

      function findPosY(obj) {
        var curtop = 0;
        if(obj.offsetParent) {
          while(1) {
            curtop += obj.offsetTop;
            if(!obj.offsetParent) {
              break;
            }
            obj = obj.offsetParent;
          }
        } else if(obj.y) {
          curtop += obj.y;
          return curtop;
        }
      }

      function init() {
        new film_strip(document.getElementById('filmstreifen'));
      }

      function film_strip(container) {
        this.container = container;
        this.images = document.createElement("div");
        this.images.width = 0;
        var strip = this;

        for (var thumb in container.children) {
          if (container.children[thumb].nodeType == 1) {
            this.images.appendChild(container.children[thumb].cloneNode(true));
            this.images.width = this.images.width + container.children[thumb].offsetWidth + 10;
          }
        }

        this.images.style.width = this.images.width + "px";

        while (this.container.hasChildNodes()) {
          this.container.removeChild(this.container.firstChild);
        }

        this.stripe = function(start, film_container) {
          this.film_container = film_container;
          this.position = start * strip.images.width;
          this.film_container.style.left = this.position+'px';

          this.stopped = false;

          this.move_forward = function (force) {
            if (!this.stopped || force) {
              this.position -= 1;
              if (this.position <= -strip.images.width)
                this.position = strip.total_width()-strip.images.width;
              this.film_container.style.left = this.position +'px';
            }
          }

          this.move_backward = function (force) {
            if (!this.stopped || force) {
              this.position += 1;
              if (this.position >= strip.total_width()-strip.images.width)
                this.position = -strip.images.width;
              this.film_container.style.left = this.position + 'px';
            }
          }

          return this;
        }

        this.stripes = new Array();
 
        for (var i = 0; i < 2 || i <= (this.container.offsetWidth+this.stripes[0].width)/this.stripes[0].width; i++) {
          var film_container = this.images.cloneNode(true);
          this.container.appendChild(film_container);
          this.stripes.push(new this.stripe(i, film_container));
        }


        this.forward_button = document.createElement("a");
        var forward_image = document.createElement("img");
        forward_image.src = "forward_img.png";
        this.forward_button.appendChild(forward_image);

        this.backward_button = document.createElement("a");
        var backward_image = document.createElement("img");
        backward_image.src = "backward_img.png";
        this.backward_button.appendChild(backward_image);

        with (this.forward_button) {
          onmouseover = function () {
            this.forward_interval = window.setInterval(function() {strip.move_forward(true);}, 10);
          }
          onmouseout = function () {
            window.clearInterval(this.forward_interval);
          }

          with (style) {
            display = "none";
            position = "absolute";
            left = "20px";
            top = "30px";
          }
        }

        with (this.backward_button) {
          onmouseover = function () {
            this.backward_interval = window.setInterval(function() {strip.move_backward(true);}, 10);
          }

          onmouseout = function () {
            window.clearInterval(this.backward_interval);
          }

          with (style) {
            display = "none";
            position = "absolute";
            left = "700px";
            top = "30px";
          }
        }

        with (this.container) {
          appendChild(this.forward_button);
          appendChild(this.backward_button);
        }


        this.container.onmouseover = function () {
          for (f in strip.stripes)
            strip.stripes[f].stopped = true;
          strip.forward_button.style.display = "block";
          strip.backward_button.style.display = "block";
        }
        this.container.onmouseout = function () {
          for (f in strip.stripes)
            strip.stripes[f].stopped = false;
          strip.forward_button.style.display = "none";
          strip.backward_button.style.display = "none";
        }

        this.move_forward = function(force) {
          for (f in this.stripes)
            this.stripes[f].move_forward(force);
        }

        this.move_backward = function(force) {
          for (f in this.stripes)
            this.stripes[f].move_backward(force);
        }

        this.total_width = function() {
          return this.images.width * this.stripes.length;
        }


        window.setInterval(function() {strip.move_backward(false);}, 30);

        return this;
      }


      function startgrowth() {
        curimg = document.getElementById('curimg');
        var endwidth = curimg.width*1.2;
        var endheight = curimg.height*1.2;
        newimg = curimg.cloneNode(false);
        newimg.style.position = 'absolute';
        newimg.style.display = 'block';
        newimg.style.zIndex = 100;
        newimg.style.top = findPosY(curimg)+'px';
        newimg.style.left = findPosX(curimg)+'px';
        newimg.id = 'growimg';
        newimg.onmouseout = function () {
          stopgrowth();
        }
        document.getElementsByTagName('body')[0].appendChild(newimg);
        curimggrowth = window.setInterval('grow('+curimg.width+','+curimg.height+','+endwidth+','+endheight+')', 10);
      }
      function stopgrowth() {
        window.clearInterval(curimggrowth);
        document.getElementsByTagName('body')[0].removeChild(newimg);
        curimg.id = '';
      }

      function grow(width, height, newwidth, newheight) {
        var img = document.getElementById('growimg');
        if (img.width == newwidth)
          window.clearInterval(curimggrowth);
        var nextwidth = img.width+(newwidth-width)/100;
        var nextheight = img.height+(newheight-height)/100;
        var newx = findPosX(img)-(nextwidth-img.width)/2;
        var newy = findPosY(img)-(nextheight-img.height)/2;
        img.width = nextwidth;
        img.style.left = newx;
        img.height = nextheight;
        img.style.top = newy;
      }

      function growth(img) {
        this.img = img;

        this.endwidth = this.img.width*1.2;
        this.endheight = this.img.height*1.2;
        
        this.startx = findPosX(this.img);
        this.starty = findPosY(this.img);

        this.curx = this.starx;
        this.cury = this.starty;

        this.growimg = this.img.cloneNode(false);

        with (this.growimg.style) {
          position = 'absolute';
          display = 'block';
          zIndex = 100;
          left = this.startx+'px';
          top = this.starty+'px';
        }

        document.getElementyByName('body')[0].appendChild(this.growimg);

        this.grow = function () {
          if (img.width == newwidth)
            window.clearInterval(curimggrowth);
          var nextwidth = img.width+(newwidth-width)/100;
          var nextheight = img.height+(newheight-height)/100;
          var newx = findPosX(img)-(nextwidth-img.width)/2;
          var newy = findPosY(img)-(nextheight-img.height)/2;
          img.width = nextwidth;
          img.style.left = newx;
          img.height = nextheight;
          img.style.top = newy;
        }
      }

      
      //]]>
    </script>
    <style type="text/css">
      body {
        background-color: #3a4536;
        color: yellow;
      }

      #filmstreifen {
        width: 800px;
        height: 150px;
        overflow: hidden;
        margin: 0 auto;
        position: relative;
      }

      #filmstreifen div {
        height: 100px;
        position: absolute;
        top:0;
        background: black url(film_hintergrund.png) center left repeat-x;
        padding: 25px 0;
      }
      #filmstreifen div * {
        margin-right:10px;
      }
      #filmstreifen div * * {
        margin-right: 0px;
      }

      img {
        border: 0;
      }
    </style>
  </head>
  <body onload="javascript:init();">
    <div id="filmstreifen">
      <img src="thumb_1.png" alt="thumb" />
      <a href="test"><img src="thumb_2.png" alt="thumb" /></a>
      <span>Testing</span>
      <img src="thumb_3.png" alt="thumb" />
      <img src="thumb_4.png" alt="thumb" />
      <img src="thumb_5.png" alt="thumb" />
      <img src="thumb_6.png" alt="thumb" />
      <img src="thumb_7.png" alt="thumb" />
      <img src="thumb_8.png" alt="thumb" />
    </div>
  </body>
</html>
